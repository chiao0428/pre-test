<!DOCTYPE html>
<html lang="en">
<head>
    <h5>奇迹科技 後端工程師-前測試題</h5>
    <center><h2>布告欄</h2></center>
    <meta charset="UTF-8">
    <title>index</title>
</head>
<body>
    <center>
    <form action="./send_message.php" method="POST">    
      <input type="text" name="sender" placeholder="my name"><br><br>
      <textarea rows="5" cols="22" name="content" placeholder="text"></textarea>  <br>
      <button type="submit">發送</button>  
    </form>  
    </center>
    <center>
    <table id="list" border="1" cellspacing="0" style="margin-top:20px;">  
      <tr>  
        <th>ID</th>  
        <th>Name</th>  
        <th>Sender</th>  
        <th class="content">Content</th>  
        <th>操作</th>  
      </tr>   
    <table>  
    <script src="https://cdn.staticfile.org/jquery/3.5.1/jquery.js"></script>
    <script>
        $.get('main.php',function(data){
            data = JSON.parse(data).data;
            var html = '';
            $(data).each(function(index,item){
                html+= `
                    <tr>  
                      <td>${item.id}</td>  
                      <td>${item.sender}</td>  
                      <td>${item.content}</td>  
                      <td>${item.send_time}</td>  
                      <td>  
                      <a href="./update.php?id=${item.id}">修改</a>  
                      <a href="./del.php?id=${item.id}">洗掉</a>  
                      </td>  
                    </tr> 
                `;
            });
            
            $('#list').append(html);
        });
    </script>
    </center>
</body>
</html>